<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RandomOS</title>
  <style>
    /* Base Styles (Dark Mode by Default) */
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: #111;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      color: #ddd;
      transition: background 0.3s, color 0.3s;
    }
    /* Light Mode */
    body.light-mode {
      background: #ddd;
      color: #222;
    }
    body.light-mode #dock {
      background: rgba(200,200,200,0.7);
    }

    /* Dock */
    #dock {
      position: fixed;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      background: rgba(0, 0, 0, 0.6);
      padding: 10px;
      border-radius: 15px;
      z-index: 100;
    }
    .dock-icon {
      width: 50px;
      height: 50px;
      background: rgba(255,255,255,0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      cursor: pointer;
      border-radius: 10px;
      transition: transform 0.2s;
    }
    .dock-icon:hover {
      transform: scale(1.1);
    }

    /* Control Center (if needed later) ‚Äì not in this version */

    /* Window Styles */
    .window {
      position: absolute;
      width: 600px;
      height: 400px;
      background: rgba(20,20,20,0.95);
      border: 1px solid #333;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.7);
      overflow: hidden;
      resize: both;
      min-width: 300px;
      min-height: 200px;
    }
    .window-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: rgba(40,40,40,0.9);
      padding: 5px 10px;
      cursor: grab;
      user-select: none;
    }
    .window-buttons {
      display: flex;
      gap: 5px;
    }
    .win-btn {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      cursor: pointer;
    }
    .win-btn.close { background: #e74c3c; }
    .win-btn.minimize { background: #f1c40f; }
    .win-btn.fullscreen { background: #2ecc71; }
    .window-content {
      height: calc(100% - 30px);
      overflow: auto;
      padding: 5px;
    }

    /* Browser App Styles */
    .app-browser input[type="text"] {
      width: 80%;
      padding: 5px;
      font-size: 14px;
    }
    .app-browser button {
      padding: 5px 10px;
      font-size: 14px;
    }
    .app-browser iframe {
      width: 100%;
      height: 70%;
      border: none;
      margin-top: 10px;
    }

    /* Calendar App Styles */
    .app-calendar table {
      width: 100%;
      border-collapse: collapse;
    }
    .app-calendar th, .app-calendar td {
      border: 1px solid #555;
      padding: 5px;
      text-align: center;
      font-size: 12px;
    }

    /* Settings App Styles */
    .app-settings label {
      display: block;
      margin: 10px 0 5px;
      font-size: 14px;
    }
    .app-settings input[type="checkbox"] {
      margin-right: 5px;
    }
  </style>
</head>
<body>

  <!-- Dock with App Icons -->
  <div id="dock">
    <div class="dock-icon" onclick="openApp('browser')">üåç</div>
    <div class="dock-icon" onclick="openApp('calendar')">üìÖ</div>
    <div class="dock-icon" onclick="openApp('settings')">‚öôÔ∏è</div>
  </div>

  <!-- Container for App Windows -->
  <div id="appContainer"></div>

  <script>
    /* Keep track of last window offset so new windows spawn slightly offset */
    let lastWindowOffset = { top: 50, left: 50 };

    /* Open an app in a draggable, resizable window */
    function openApp(appName) {
      const win = document.createElement("div");
      win.className = "window";
      win.style.top = lastWindowOffset.top + "px";
      win.style.left = lastWindowOffset.left + "px";

      // Update offset for next window
      lastWindowOffset.top += 20;
      lastWindowOffset.left += 20;
      if (lastWindowOffset.top > 200) lastWindowOffset.top = 50;
      if (lastWindowOffset.left > 200) lastWindowOffset.left = 50;

      let titleText = "";
      let contentHTML = "";

      if (appName === "browser") {
        titleText = "Browser";
        contentHTML = `
          <div class="app-browser">
            <input type="text" value="https://example.com">
            <button onclick="loadURL(this)">Go</button>
            <iframe src="https://example.com"></iframe>
          </div>
        `;
      } else if (appName === "calendar") {
        titleText = "Calendar";
        contentHTML = `<div class="app-calendar">${generateCalendarHTML()}</div>`;
      } else if (appName === "settings") {
        titleText = "Settings";
        contentHTML = `
          <div class="app-settings">
            <label><input type="checkbox" id="toggleDark" onchange="toggleDarkMode()"> Dark Mode</label>
          </div>
        `;
      }

      win.innerHTML = `
        <div class="window-header" onmousedown="startDrag(event, this.parentElement)">
          <div class="window-buttons">
            <div class="win-btn close" onclick="this.parentElement.parentElement.parentElement.remove()"></div>
            <div class="win-btn minimize" onclick="minimizeWindow(this)"></div>
            <div class="win-btn fullscreen" onclick="toggleFullscreen(this)"></div>
          </div>
          <div class="window-title">${titleText}</div>
        </div>
        <div class="window-content">${contentHTML}</div>
      `;

      document.getElementById("appContainer").appendChild(win);
    }

    /* Browser: Load URL into iframe */
    function loadURL(btn) {
      const input = btn.previousElementSibling;
      const iframe = btn.nextElementSibling;
      iframe.src = input.value;
    }

    /* Calendar: Generate basic calendar HTML for the current month */
    function generateCalendarHTML() {
      const now = new Date();
      const year = now.getFullYear();
      const month = now.getMonth();
      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month + 1, 0).getDate();
      let html = `<table><tr>`;
      const weekdays = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
      weekdays.forEach(day => { html += `<th>${day}</th>`; });
      html += `</tr><tr>`;
      for (let i = 0; i < firstDay; i++) {
        html += `<td></td>`;
      }
      for (let d = 1; d <= daysInMonth; d++) {
        if ((d + firstDay - 1) % 7 === 0 && d > 1) {
          html += `</tr><tr>`;
        }
        html += `<td>${d}</td>`;
      }
      html += `</tr></table>`;
      return html;
    }

    /* Settings: Toggle Dark Mode (switch between dark and light) */
    function toggleDarkMode() {
      document.body.classList.toggle("light-mode");
    }

    /* Window Controls: Fullscreen toggle */
    function toggleFullscreen(btn) {
      const win = btn.closest(".window");
      if (!win.classList.contains("fullscreen-mode")) {
        win.style.width = "100vw";
        win.style.height = "100vh";
        win.style.top = "0";
        win.style.left = "0";
        win.classList.add("fullscreen-mode");
      } else {
        win.style.width = "600px";
        win.style.height = "400px";
        win.style.top = lastWindowOffset.top + "px";
        win.style.left = lastWindowOffset.left + "px";
        win.classList.remove("fullscreen-mode");
      }
    }

    /* Window Controls: Minimize (for now, simply hide the window content) */
    function minimizeWindow(btn) {
      const win = btn.closest(".window");
      const content = win.querySelector(".window-content");
      content.style.display = content.style.display === "none" ? "block" : "none";
    }

    /* Draggable Windows */
    function startDrag(event, winElement) {
      let shiftX = event.clientX - winElement.getBoundingClientRect().left;
      let shiftY = event.clientY - winElement.getBoundingClientRect().top;

      function moveAt(clientX, clientY) {
        winElement.style.left = (clientX - shiftX) + 'px';
        winElement.style.top = (clientY - shiftY) + 'px';
      }

      function onMouseMove(e) {
        moveAt(e.clientX, e.clientY);
      }

      document.addEventListener('mousemove', onMouseMove);
      document.addEventListener('mouseup', function mouseUp() {
        document.removeEventListener('mousemove', onMouseMove);
        document.removeEventListener('mouseup', mouseUp);
      });
    }
  </script>
</body>
</html>
